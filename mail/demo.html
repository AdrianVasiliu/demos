<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Demo Mail Application</title><link rel="stylesheet" href="demo.css"></head><body class="soria" role="application">
	<div id="preLoader"><p></p></div>
	<div data-dojo-id="mailStore" data-dojo-type="dojo/data/ItemFileWriteStore" data-dojo-props='"url":"mail.json"'></div>
	<div data-dojo-id="contactStore" data-dojo-type="dojo/data/ItemFileWriteStore" data-dojo-props='"url":"contacts.php"'></div>

	<!-- Inline declaration for programmatically created "New Message" tabs -->
	<div data-dojo-type="dijit/Declaration" data-dojo-props='"widgetclass":"mail.NewMessage"'>
		<div title="Composing..." data-dojo-attach-point="container" data-dojo-type="dijit/layout/BorderContainer" data-dojo-props='"closeable":true'>
			<div style="height:60px; overflow: visible; z-index: 10; color:#666;" data-dojo-type="dijit/layout/ContentPane" data-dojo-props='"region":"top"'>
				<table width="100%"><tr style="padding-top:5px;"><td style="padding-left:20px; padding-right: 8px; text-align:right;"><label for="${id}_to">To:</label></td>
						<td width="100%">
							<input id="${id}_to" style="width: 40em;" data-dojo-type="dijit/form/ComboBox" data-dojo-props='"hasdownarrow":false,"store":"contactStore","searchattr":"display"'></td>
					</tr><tr><td style="padding-left: 20px; padding-right:8px; text-align:right;"><label for="${id}_subject">Subject:</label></td>
						<td width="100%">
							<select id="${id}_subject" style="width: 40em;" data-dojo-type="dijit/form/ComboBox" data-dojo-props='"hasdownarrow":false'><option></option><option>progress meeting</option><option>reports</option><option>lunch</option><option>vacation</option><option>status meeting</option></select></td>
					</tr></table><hr noshade size="1"></div>

			<!-- new message part -->
			<div style="overflow:hidden" data-dojo-type="dijit/Editor" data-dojo-props="&quot;region&quot;:&quot;center&quot;,&quot;extraplugins&quot;:&quot;['createLink','insertImage',{name:'dijit._editor.plugins.FontChoice', command: 'fontName', generic: true},'fontSize']&quot;">
<i> This is just a sample message. There is email-address auto-complete in the to: field.
<br><br> give it a whirl.
</i>
</div>
			<div style="height:32px" data-dojo-type="dijit/layout/ContentPane" data-dojo-props='"region":"bottom","align":"center"'>
				<button data-dojo-type="dijit/form/Button" data-dojo-props='"iconclass":"mailIconOk"'>Send
				<script type="dojo/method" data-dojo-event="onClick">
					require(["dojo/dom"], function (dom) {
						var toField = dom.byId("${id}_to");
						if (toField.value == ""){
							alert("Please enter a recipient address");
						}else{
							showSendBar();
						}
					});
				</script></button>
				<button data-dojo-type="dijit/form/Button" data-dojo-props='"iconclass":"mailIconCancel"'>Cancel
				<script type="dojo/method" data-dojo-event="onClick">
					tabs.closeChild(tabs.selectedChildWidget);
				</script></button>
			</div>
		</div>
	</div>


	<div id="main" data-dojo-type="dijit/layout/BorderContainer">

		<!-- toolbar with new mail button, etc. -->
		<div data-dojo-type="dijit/Toolbar" data-dojo-props='"region":"top"'>
			<div id="getMail" data-dojo-type="dijit/form/ComboButton" data-dojo-props='"iconclass":"mailIconGetMail","optionstitle":"Mail Source Options"'>
				<script type="dojo/method" data-dojo-event="onClick">
					fakeDownload();
				</script><span>Get Mail</span>
				<ul data-dojo-type="dijit/Menu"><li data-dojo-type="dijit/MenuItem" data-dojo-props='"iconclass":"mailIconGetMail"'>Yahoo</li>
					<li data-dojo-type="dijit/MenuItem" data-dojo-props='"iconclass":"mailIconGetMail"'>GMail</li>
				</ul></div>
			<span data-dojo-type="dijit/Tooltip" data-dojo-props='"connectid":"getMail"'>Click to download new mail.</span>

			<button id="newMsg" data-dojo-type="dijit/form/Button" data-dojo-props='"iconclass":"mailIconNewMessage"'>
				New Message
				<script type="dojo/method" data-dojo-event="onClick">
					require(["dojo/_base/lang"], function (lang) {
						
						/* make a new tab for composing the message */
						var newTab = new mail.NewMessage({id: "new"+paneId  }).container;
						lang.mixin(newTab,
							{
								title: "New Message #" + paneId++,
								closable: true,
								onClose: testClose
							}
						);
						tabs.addChild(newTab);
						tabs.selectChild(newTab);
					});
				</script></button>
			<span data-dojo-type="dijit/Tooltip" data-dojo-props='"connectid":"newMsg"'>Click to compose new message.</span>

			<button id="options" data-dojo-type="dijit/form/Button" data-dojo-props='"iconclass":"mailIconOptions"'>
			 Â Options	
				<script type="dojo/method" data-dojo-event="onClick">
					dijit.byId('optionsDialog').show();
				</script></button>
			<div data-dojo-type="dijit/Tooltip" data-dojo-props='"connectid":"options"'>Set various options</div>
		</div>
		
		<div id="tabs" data-dojo-id="tabs" data-dojo-type="dijit/layout/TabContainer" data-dojo-props='"region":"center"'>
			<!-- main section with tree, table, and preview -->
			<div id="inbox" title="Inbox" data-dojo-type="dijit/layout/BorderContainer" data-dojo-props='"design":"sidebar"'>
				<div id="accordion" style="width:20%;" data-dojo-type="dijit/layout/AccordionContainer" data-dojo-props='"region":"leading","minsize":20,"splitter":true'>
					<div title="Folders" data-dojo-type="dijit/layout/ContentPane">
						<div id="mytree" label="Folders" data-dojo-type="dijit/Tree" data-dojo-props="&quot;store&quot;:&quot;mailStore&quot;,&quot;childrenattr&quot;:&quot;folders&quot;,&quot;query&quot;:&quot;{type:'folder'}&quot;">
							<script type="dojo/method" data-dojo-event="onClick" data-dojo-args="item">
								if(!item){
									return;	// top level node in tree doesn't correspond to any item
								}
								/* filter the message list to messages in this folder */
								table.setQuery({
									type: "message",
									folder: mailStore.getValue(item, "id")
								});
							</script><script type="dojo/method" data-dojo-event="getIconClass" data-dojo-args="item">
								return (item && mailStore.getValue(item, "icon")) || "mailIconFolderDocuments";
							</script></div>
					</div>
					<div title="Search Messages" data-dojo-type="dijit/layout/ContentPane">
						<form data-dojo-id="searchForm" data-dojo-type="dijit/form/Form">
							<table><tr><td><label for="subjectSearch">Subject:</label></td>
									<td><input id="subjectSearch" name="label" data-dojo-type="dijit/form/TextBox"></td>
								</tr><tr><td><label for="senderSearch">Sender:</label></td>
									<td><input id="senderSearch" name="sender" data-dojo-type="dijit/form/TextBox"></td>
								</tr><tr><td><label for="bodySearch">Message text:</label></td>
									<td><input id="bodySearch" name="text" data-dojo-type="dijit/form/TextBox"></td>
								</tr><tr><td colspan="2" align="center"><button onclick="searchMessages" data-dojo-type="dijit/form/Button">Search</button></td>
								</tr></table></form>
					</div>
				</div>  <!-- end of Accordion -->

				<!-- list of messages pane -->
				<table id="table" style="height: 150px;" data-dojo-id="table" data-dojo-type="dojox/grid/DataGrid" data-dojo-props="&quot;region&quot;:&quot;top&quot;,&quot;minsize&quot;:20,&quot;splitter&quot;:true,&quot;store&quot;:&quot;mailStore&quot;,&quot;query&quot;:&quot;{ type: 'message' }&quot;,&quot;onrowclick&quot;:&quot;onMessageClick&quot;"><thead><tr><th field="sender" width="10%">Sender</th>
							<th field="label" width="80%">Subject</th>
							<th field="sent" width="10%" formatter="formatDate">Date</th>
						</tr></thead></table><!-- end of listPane --><!-- message preview pane --><div id="message" tabindex="0" data-dojo-type="dijit/layout/ContentPane" data-dojo-props='"region":"center","role":"document","aria-live":"assertive","aria-atomic":true,"minsize":20'>
					<p>
					This is a simple application mockup showing some of the dojo widgets:
					</p>
					<ul><li>layout widgets: BorderContainer, AccordionContainer</li>
					  <li>TooltipDialog, Tooltip</li>
					  <li>Tree</li>
					  <li>form widgets: Button, DropDownButton, ComboButton, FilteringSelect, ComboBox</li>
					  <li>Editor</li>
					</ul><p>
					The message list above originally contains all the messages, but you can filter it
					by clicking on items in the left Accordion.
					Then click on the messages in the above list to display them.
					There's no server running, so the app is just a facade and it doesn't really do anything.
					<!-- TODO: delete button (we can delete since we are using ItemFileWriteStore -->
					</p>
					<p>
					<span style="font-family: 'Comic Sans MS',Textile,cursive; color: blue; font-style: italic;">-- Bill</span>
					</p>
				</div> <!-- end of "message" -->

			</div> <!-- end of inbox -->
			
			<div title="Contacts" data-dojo-type="dijit/layout/BorderContainer">
				<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props='"region":"top"'>
					<center id="contactIndex"></center>
				</div>
				<table data-dojo-id="contactTable" data-dojo-type="dojox/grid/DataGrid" data-dojo-props='"store":"contactStore","region":"center","editable":true'><thead><tr><th field="first" width="25%" editable="true">First Name</th>
							<th field="last" width="25%" editable="true">Last Name</th>
							<th field="email" width="50%" editable="true">Email Address</th>
						</tr></thead></table><div data-dojo-type="dijit/layout/ContentPane" data-dojo-props='"region":"bottom"'>
					Edit your contact information from this page by clicking entries in the table above.
				</div>
			</div>

		</div> <!-- end of TabContainer -->

		<div id="footer" data-dojo-type="dijit/layout/ContentPane" data-dojo-props='"region":"bottom","align":"left"'>
			<span style="float:right;">DojoMail v1.2 (demo only)</span>
			<div id="fetchMail" style="opacity:0;visibility:hidden">
				<div id="fakeFetch" style="height:15px; width:275px;" data-dojo-type="dijit/ProgressBar" data-dojo-props='"indeterminate":true,"report":"fakeReport"'></div>
			</div>
		</div> 
	</div> <!-- end of main -->

	<div id="optionsDialog" title="Options:" data-dojo-type="dijit/Dialog">
		<table><tr><td style="text-align:right;"><label for="option1">Transport type:</label></td><td>
		<select id="option1" data-dojo-type="dijit/form/FilteringSelect"><option value="pop3">POP3</option><option value="imap">IMAP</option></select></td></tr><tr><td style="text-align:right;"><label for="option2">Server:</label></td><td><input id="option2" type="text" data-dojo-type="dijit/form/TextBox"></td></tr><tr><td style="text-align:right;"><input type="checkbox" id="fooCB" data-dojo-type="dijit/form/CheckBox"></td><td><label for="fooCB">Leave messages on Server</label></td></tr><tr><td style="text-align:right;"><input type="checkbox" id="fooCB2" data-dojo-type="dijit/form/CheckBox"></td><td><label for="fooCB2">Remember Password</label></td></tr><tr><td colspan="2" style="text-align:center;">
		<button type="submit" data-dojo-type="dijit/form/Button" data-dojo-props='"iconclass":"mailIconOk"'>OK</button>
		<button type="submit" data-dojo-type="dijit/form/Button" data-dojo-props='"iconclass":"mailIconCancel"'>Abort</button>
		</td></tr></table></div>
	<div id="sendDialog" title="Sending Mail" data-dojo-type="dijit/Dialog">
		<div id="sendMailBar" style="text-align:center">
			<div id="fakeSend" style="height:15px; width:175px;" data-dojo-type="dijit/ProgressBar" data-dojo-props='"indeterminate":true'></div>
		</div>
	</div>	
	<script src="../config.js"></script>
	<script type="text/javascript" src="../../dojo/dojo.js" charset="utf-8" data-dojo-config="isDebug: true"></script>
	<script>
		require(["demo/src"]);
	</script>
</body></html>